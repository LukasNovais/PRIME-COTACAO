<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<title>Calculadora de Frete com ICMS Embutido</title>
<style>
  body { font-family: Arial, sans-serif; max-width: 600px; margin: 20px auto; padding: 10px; background: #f7f7f7; }
  input[type=number] { width: 100px; padding: 5px; margin: 5px 0; }
  label { display: block; margin-top: 10px; }
  button { margin-top: 15px; padding: 10px 15px; font-size: 16px; cursor: pointer; }
  .resultado { margin-top: 20px; background: #fff; padding: 15px; border-radius: 6px; box-shadow: 0 0 5px rgba(0,0,0,0.1);}
  table { width: 100%; border-collapse: collapse; margin-top: 10px; }
  th, td { border: 1px solid #ccc; padding: 8px; text-align: right; }
  th { background-color: #eee; }
</style>
</head>
<body>

<h2>Calculadora de Frete com ICMS Embutido</h2>

<form id="calcFreteForm">
  <label>
    Quilômetros rodados em GO (até divisa):
    <input type="number" id="kmGo" value="400" step="1" min="0" required />
  </label>
  <label>
    Quilômetros rodados em MT (de divisa até destino):
    <input type="number" id="kmMt" value="70" step="1" min="0" required />
  </label>
  <label>
    Valor por Km (R$):
    <input type="number" id="valorKm" value="5.30" step="0.01" min="0" required />
  </label>
  <label>
    Alíquota ICMS GO (%):
    <input type="number" id="icmsGo" value="12" step="0.01" min="0" max="100" required />
  </label>
  <label>
    Alíquota ICMS MT (%):
    <input type="number" id="icmsMt" value="17" step="0.01" min="0" max="100" required />
  </label>

  <button type="submit">Calcular Frete</button>
</form>

<div class="resultado" id="resultado" style="display:none;">
  <h3>Resultados:</h3>
  <table>
    <thead>
      <tr>
        <th>Trecho</th>
        <th>Km Rodados</th>
        <th>Frete sem ICMS (R$)</th>
        <th>Frete com ICMS embutido (R$)</th>
        <th>ICMS destacado (R$)</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>GO → MT</td>
        <td id="kmGoRes"></td>
        <td id="freteGoSem"></td>
        <td id="freteGoCom"></td>
        <td id="icmsGoRes"></td>
      </tr>
      <tr>
        <td>MT → MT</td>
        <td id="kmMtRes"></td>
        <td id="freteMtSem"></td>
        <td id="freteMtCom"></td>
        <td id="icmsMtRes"></td>
      </tr>
      <tr style="font-weight:bold; background:#eee;">
        <td>Total</td>
        <td id="kmTotalRes"></td>
        <td id="freteTotalSem"></td>
        <td id="freteTotalCom"></td>
        <td id="icmsTotalRes"></td>
      </tr>
    </tbody>
  </table>
</div>

<script>
  document.getElementById('calcFreteForm').addEventListener('submit', function(event) {
    event.preventDefault();

    // Pega valores do formulário
    const kmGo = parseFloat(document.getElementById('kmGo').value);
    const kmMt = parseFloat(document.getElementById('kmMt').value);
    const valorKm = parseFloat(document.getElementById('valorKm').value);
    const icmsGoPerc = parseFloat(document.getElementById('icmsGo').value);
    const icmsMtPerc = parseFloat(document.getElementById('icmsMt').value);

    // Função para calcular frete com ICMS embutido
    function calcularFreteComICMS(freteSemICMS, aliquotaICMS) {
      if (aliquotaICMS === 0) return { freteComICMS: freteSemICMS, icmsDestacado: 0 };
      const freteComICMS = freteSemICMS / (1 - aliquotaICMS / 100);
      const icmsDestacado = freteComICMS - freteSemICMS;
      return { freteComICMS, icmsDestacado };
    }

    // Calcular frete GO → MT
    const freteGoSem = kmGo * valorKm;
    const { freteComICMS: freteGoCom, icmsDestacado: icmsGoRes } = calcularFreteComICMS(freteGoSem, icmsGoPerc);

    // Calcular frete MT → MT
    const freteMtSem = kmMt * valorKm;
    const { freteComICMS: freteMtCom, icmsDestacado: icmsMtRes } = calcularFreteComICMS(freteMtSem, icmsMtPerc);

    // Totais
    const kmTotal = kmGo + kmMt;
    const freteTotalSem = freteGoSem + freteMtSem;
    const freteTotalCom = freteGoCom + freteMtCom;
    const icmsTotal = icmsGoRes + icmsMtRes;

    // Mostrar resultados formatados
    function formatarValor(num) {
      return num.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
    }

    document.getElementById('kmGoRes').textContent = kmGo.toFixed(0);
    document.getElementById('freteGoSem').textContent = formatarValor(freteGoSem);
    document.getElementById('freteGoCom').textContent = formatarValor(freteGoCom);
    document.getElementById('icmsGoRes').textContent = formatarValor(icmsGoRes);

    document.getElementById('kmMtRes').textContent = kmMt.toFixed(0);
    document.getElementById('freteMtSem').textContent = formatarValor(freteMtSem);
    document.getElementById('freteMtCom').textContent = formatarValor(freteMtCom);
    document.getElementById('icmsMtRes').textContent = formatarValor(icmsMtRes);

    document.getElementById('kmTotalRes').textContent = kmTotal.toFixed(0);
    document.getElementById('freteTotalSem').textContent = formatarValor(freteTotalSem);
    document.getElementById('freteTotalCom').textContent = formatarValor(freteTotalCom);
    document.getElementById('icmsTotalRes').textContent = formatarValor(icmsTotal);

    document.getElementById('resultado').style.display = 'block';
  });
</script>

</body>
</html>

